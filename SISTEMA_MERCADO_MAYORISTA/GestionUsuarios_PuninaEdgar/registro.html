<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Usuario - Externo</title>
    <link rel="stylesheet" href="estiloreg.css">
</head>
<body>
    <div class="register-container">
        <h2>Registro de Usuario Externo</h2>
        <form action="procesar_registro.php" method="POST" onsubmit="return validarFormulario()">
            
            <label for="id">Cédula</label>
            <input type="text" id="id" name="id" required pattern="\d{10}" title="Debe contener 10 números">

            <label for="nombres">Nombres</label>
            <input type="text" id="nombres" name="nombres" required pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ ]+" title="Solo se permiten letras y espacios">

            <label for="apellidos">Apellidos</label>
            <input type="text" id="apellidos" name="apellidos" required pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ ]+" title="Solo se permiten letras y espacios">

            <label for="email">Correo Electrónico</label>
            <!-- Cambiar la expresión regular para controlar que no solo haya números antes del @gmail.com -->
            <input type="email" id="email" name="email" required pattern="^[A-Za-z][A-Za-z0-9]*@gmail\.com$" title="Debe tener letras y números antes de '@gmail.com' y no solo números">

            <label for="password">Contraseña</label>
            <input type="password" id="password" name="password" required pattern="^[A-Za-z0-9]{8,}$" title="Debe contener al menos 8 caracteres, solo letras y números">

            <label for="tipo_usuario">Tipo de Usuario</label>
            <select id="tipo_usuario" name="tipo_usuario" required>
                <option value="comprador">Comprador</option>
                <option value="vendedor">Vendedor</option>
            </select>

            <button type="submit" class="register-btn">Registrarse</button>
        </form>

        <div class="extra-options">
            <a href="login_externo.html" class="link">¿Ya tienes cuenta? Inicia sesión</a>
            <a href="login_externo.html" class="volver-btn">Volver</a>
        </div>
    </div>

    <script>
        function validarFormulario() {
            let cedula = document.getElementById("id").value;
            let nombres = document.getElementById("nombres").value;
            let apellidos = document.getElementById("apellidos").value;
            let email = document.getElementById("email").value;
            let password = document.getElementById("password").value;

            let cedulaRegex = /^\d{10}$/;
            let textoRegex = /^[A-Za-zÁÉÍÓÚáéíóúÑñ ]+$/;
            let emailRegex = /^[A-Za-z][A-Za-z0-9]*@gmail\.com$/; // Cambiado para asegurar letras y números antes de @gmail.com
            let passwordRegex = /^[A-Za-z0-9]{8,}$/;

            if (!cedulaRegex.test(cedula)) {
                alert("La cédula debe contener exactamente 10 números.");
                return false;
            }
            if (!textoRegex.test(nombres)) {
                alert("Los nombres solo pueden contener letras y espacios.");
                return false;
            }
            if (!textoRegex.test(apellidos)) {
                alert("Los apellidos solo pueden contener letras y espacios.");
                return false;
            }
            if (!emailRegex.test(email)) {
                alert("El correo debe tener letras y números antes de '@gmail.com' y no solo números.");
                return false;
            }
            if (!passwordRegex.test(password)) {
                alert("La contraseña debe tener al menos 8 caracteres, solo letras y números.");
                return false;
            }

            return true;
        }
    </script>
</body>
</html>
